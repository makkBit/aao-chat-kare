(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{293:function(e,t,n){},294:function(e,t,n){},297:function(e,t,n){},300:function(e,t,n){},304:function(e,t,n){},305:function(e,t,n){},307:function(e,t,n){"use strict";n.r(t);n(136);var a=n(141),o=(n(73),n(85)),s=(n(115),n(53)),r=n(57),c=n(58),i=n(67),l=n(59),u=n(68),m=n(0),h=n.n(m),p=(n(293),n(294),function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return h.a.createElement("div",{className:"component-chat-window"},this.props.children)}}]),t}(m.Component)),f=(n(295),n(306)),g=(n(297),function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return h.a.createElement("div",{className:"component-chat-header"},h.a.createElement(f.a,{status:!0===this.props.online?"success":"error",text:!0===this.props.online?"Online":"Offline"}),h.a.createElement("h3",null,"What's on your mind ?"))}}]),t}(m.Component)),b=(n(137),n(139)),d=(n(138),n(140)),E=(n(300),n(128)),v=n.n(E),y=function(){var e=localStorage.getItem("username");return e?e[0]:"YOU"},O=function(){var e=localStorage.getItem("username");return e||"YOU"},j=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"showMsg",value:function(e,t){return h.a.createElement("div",{className:"message",key:t},h.a.createElement(b.a,{author:h.a.createElement("h4",null,O()),avatar:h.a.createElement(d.a,{style:{color:"#fff",backgroundColor:"#1f2324"}},y()),content:h.a.createElement("p",null,e),datetime:h.a.createElement(a.a,{title:v()().format("YYYY-MM-DD HH:mm:ss")},h.a.createElement("span",null,v()().fromNow()))}))}},{key:"showEchoMsg",value:function(e,t){return h.a.createElement("div",{className:"message",key:t},h.a.createElement(b.a,{author:h.a.createElement("h4",null,"Reply"),avatar:h.a.createElement(d.a,{style:{color:"#fff",backgroundColor:"#1f2324"}},"W.S."),content:h.a.createElement("p",null,e),datetime:h.a.createElement(a.a,{title:v()().format("YYYY-MM-DD HH:mm:ss")},h.a.createElement("span",null,v()().fromNow()))}))}},{key:"render",value:function(){var e=this,t=this.props.chatHistory;return h.a.createElement("div",{className:"component-chat-message"},t&&t.length>0&&t.map(function(t,n){return(n+1)%2!==0?e.showMsg(t,n):e.showEchoMsg(t,n)}))}}]),t}(m.Component),k=(n(304),n(145),n(142)),w=(n(114),n(143)),S=(n(305),w.a.TextArea),C=function(e){var t=Object(m.useRef)(null);return Object(m.useEffect)(function(){t.current&&t.current.focus()},[]),h.a.createElement(h.a.Fragment,null,h.a.createElement(k.a.Item,null,h.a.createElement(S,{rows:2,onChange:e.onChange,value:e.value,placeholder:"Type your message here",ref:t})),h.a.createElement(k.a.Item,null,h.a.createElement(o.a,{htmlType:"submit",loading:e.submitting,onClick:e.onSubmit,type:"primary"},"Send Message")))},M=function(e){function t(){return Object(r.a)(this,t),Object(i.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.props,t=e.submitting,n=(e.value,e.inputMsg);return h.a.createElement("div",{className:"component-chat-footer"},h.a.createElement(b.a,{avatar:h.a.createElement(d.a,{style:{color:"#fff",backgroundColor:"#1f2324"}},y()),content:h.a.createElement(C,{onChange:this.props.onChange,onSubmit:this.props.handleSubmit,submitting:t,value:n})}))}}]),t}(m.Component),I=n(21),H=function(e){function t(e){var n;return Object(r.a)(this,t),(n=Object(i.a)(this,Object(l.a)(t).call(this,e))).handleInputChange=function(e){n.setState({inputMsg:e.target.value})},n.handleLogout=function(){localStorage.clear(),n.props.history.push("/")},n.onWsOpen=function(e){console.log(e),e&&n.setState({online:!0})},n.onWsClose=function(e){console.log(e),e&&n.setState({online:!1})},n.onWsMessageRcv=function(e){console.log(e),n.props.updateChatHistory(e.data),e.data&&n.setState({inputMsg:""})},n.onWsError=function(e){console.log(e),e&&(console.log(e),n.setState({online:!1}))},n.sendMsg=function(){1===n.webSocketInstance.readyState&&n.state.inputMsg.trim().length>0&&(n.props.updateChatHistory(n.state.inputMsg),n.webSocketInstance.send(n.state.inputMsg))},n.state={online:!1,submitting:!1,inputMsg:""},n.webSocketInstance=null,n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.webSocketInstance=new WebSocket("wss://echo.websocket.org/"),this.webSocketInstance.addEventListener("open",this.onWsOpen),this.webSocketInstance.addEventListener("close",this.onWsClose),this.webSocketInstance.addEventListener("message",this.onWsMessageRcv),this.webSocketInstance.addEventListener("error",this.onWsError)}},{key:"render",value:function(){return h.a.createElement("div",{className:"view-home-page"},h.a.createElement("div",{className:"container"},h.a.createElement(p,null,h.a.createElement(g,{online:this.state.online}),h.a.createElement(j,{chatHistory:this.props.chatHistory}),h.a.createElement(M,{inputMsg:this.state.inputMsg,onChange:this.handleInputChange,handleSubmit:this.sendMsg,submitting:this.state.submitting})),h.a.createElement(a.a,{placement:"topRight",title:"Logout",className:"logout-btn",onClick:this.handleLogout},h.a.createElement(o.a,{type:"primary"},h.a.createElement(s.a,{type:"logout"})))))}}]),t}(m.Component),N=Object(I.b)(function(e){return{chatHistory:e.chat.chatHistory}},function(e){return{updateChatHistory:function(t){return e({type:"UPDATE_CHAT_HISTORY",data:t})}}})(H);t.default=N}}]);
//# sourceMappingURL=home.1ddf467e.chunk.js.map